<div class="container mt-5">
  <div class="card">
    <div class="card-header">
      <h1>FediSim</h1>
      <h4>Simulate your own Fediverse</h4>
    </div>

    <div class="card-body">
      <div class="form-group">
        <h5 for="year">Start year:</h5>
        <input type="number" [(ngModel)]="startState.year" class="form-control" id="year">
      </div>
      <div class="form-group">
        <h5 for="year">Duration:</h5>
        <input type="number" [(ngModel)]="simulation.duration" class="form-control" id="year">
      </div>
      <div class="form-group">
        <h5 for="simulationType">Simulation-Type:</h5>
        <select class="form-control" id="simulationType" [(ngModel)]="selectedSimulationType">
          <option *ngFor="let type of availableSimulationTypes" [value]="type">{{ type }}</option>
        </select>
      </div>

      <br>

      <div class="form-group">
        <h5 for="servers">Servers:</h5>
        <div *ngFor="let server of startState.servers; let index = index">
          <div class="row">
             <div class="col-md-6">
              <input type="text" [(ngModel)]="server.name" class="form-control" id="serverName{{index}}" placeholder="Server Name">
            </div>
            <div class="col-md-6">
              <input type="number" [(ngModel)]="server.usersPerMonth" class="form-control" id="usersPerMonth{{index}}" placeholder="Users Per Month">
            </div>
          </div>
        </div>
        <button class="btn btn-secondary mt-3" (click)="addServer()">Add Server</button>
      </div>

      <br><br>

      <div class="mt-3">
        <button class="btn btn-primary mr-2" (click)="startSimulation()" style="float: right;" *ngIf="!isLoadingSimulationResult">Start</button>
      </div>
      <div *ngIf="isLoadingSimulationResult" style="float: right;">
        Loading ...
      </div>

      <br>
      <br>
      <hr>
      <br>

      <div class="card shadow mb-4" *ngIf="fediverseHistoryResult">
        <div class="card-header py-3">
          <h6 class="m-0 font-weight-bold text-primary">Simulation Result</h6>
        </div>
        <div class="card-body">
          <div *ngFor="let fediverseState of fediverseHistoryResult?.fediverseStates; let index = index">
            <div class="row">
              <div class="col-md-12">
                <h5>Year&nbsp;{{ fediverseState.year }}</h5>
              </div>
            </div>
            <div *ngFor="let server of fediverseState.servers;">
              <div class="row">
                <div class="col-md-6">
                  <div class="form-group">
                    <label for="serverName">Server Name:&nbsp;</label>
                    <span id="serverName">{{ server.name }}</span>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-group">
                    <label for="usersPerMonth">Users Per Month:&nbsp;</label>
                    <span id="usersPerMonth">{{ server.usersPerMonth }}</span>
                  </div>
                </div>
              </div>
            </div>
            <br>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
